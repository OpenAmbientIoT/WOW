<!-- Temperature -->
<template>
  <div v-if="wavelet.event.name == TEMP_C"
       :class="'shine' + (wavelet.options.fadein ? ' shine_fadein' : '' ) + (wavelet.options.fadeout ? ' shine_fadeout' : '' )"
       :style="('left:' + (wavelet.x - wavelet.diskSize/2) + 'px; top:' + (wavelet.y - wavelet.diskSize/2) + 'px;')
           + ('width: ' + wavelet.diskSize*1 + 'px;' + 'height: ' + wavelet.diskSize*1 + 'px;') + ('background-color:' + wavelet.color + ';') +
           ('-webkit-filter: blur(' + wavelet.diskSize/5 + 'px)')"></div>
  <div v-else-if="wavelet.predecessor && wavelet.predecessor.event.name == TEMP_C"
       :class="'shine' + (wavelet.predecessor.options.fadein ? ' shine_fadein' : '' ) + (wavelet.predecessor.options.fadeout ? ' shine_fadeout' : '' )"
       :style="('left:' + (wavelet.predecessor.x - wavelet.predecessor.diskSize/2) + 'px; top:' + (wavelet.predecessor.y - wavelet.predecessor.diskSize/2) + 'px;')
           + ('width: ' + wavelet.predecessor.diskSize + 'px;' + 'height: ' + wavelet.predecessor.diskSize + 'px;') + ('background-color:' + wavelet.predecessor.color + ';') +
           ('-webkit-filter: blur(' + wavelet.predecessor.diskSize/5 + 'px)')"></div>
  <div :class="'wavelet wavelet_packet' + (wavelet.options.fadein ? ' wavelet_fadein' : '' )
    + (wavelet.options.fadeout ? ' wavelet_fadeout' : '' )
    + (wavelet.options.ringsFadeout ? ' wavelet_fadeout' : '' )"
       :style="('left:' + (wavelet.x - wavelet.size/2) + 'px; top:' + (wavelet.y - wavelet.size/2) + 'px;')
           + ('width: ' + wavelet.size + 'px;' + 'height: ' + wavelet.size + 'px;')">

<!--    <span class="text-white position-fixed">{{ wavelet.extension.packets.size }}</span>-->
    <template v-if="!wavelet.options.ringsFadeout">
      <svg v-for="(created) in wavelet.extension.packets" :key="created" xmlns="http://www.w3.org/2000/svg"
           :style="('width: ' + wavelet.size + 'px;' + 'height: ' + wavelet.size + 'px;')">
        <circle r="10" stroke="#fff" :stroke-width="2 * (wavelet.size/64)" fill="none" cx="50%" cy="50%">
          <animate attributeType="XML" attributeName="r" :from="1" :to="wavelet.size/2" dur=".4" :begin="0"
                   repeatCount="1" keySplines="0,.69,.16,1" calcMode="spline"/>
          <animate attributeType="CSS" attributeName="opacity" values="0;1;0" dur=".4" :begin="0" repeatCount="1"
                   fill="freeze"/>
        </circle>
      </svg>
    </template>

    <span v-if="wavelet.event.name == TEMP_C"
          :class="'wavelet__value'"
          :style="`font-size: ${wavelet.size/10 < 6 ? 6 : wavelet.size/10}px;`">{{
        wavelet.event.value ? wavelet.event.value : '-'
      }}Â°</span>
    <span class="wavelet__value" v-if="wavelet.debug && wavelet.event.name != TEMP_C"
          :style="`color: green; font-size: ${wavelet.size/10 < 6 ? 6 : wavelet.size/10}px;`">{{
        wavelet.event.name ? wavelet.event.name : '-'
      }}{{ wavelet.event.value ? ' ' + wavelet.event.value : '' }}</span>
    <div v-if="wavelet.colored" class="wavelet-coloring" :style="`background-color: ${wavelet.color}`"></div>
  </div>
</template>


<script setup>
import {defineProps} from "vue"
import WaveletElement from "@/assets/js/classes/WaveletElement"
import {TEMP_C} from "@/assets/js/classes/events/EventsConfig"
// eslint-disable-next-line
import {generate} from "@/assets/js/helpers/id";
// eslint-disable-next-line
const props = defineProps({
  wavelet: WaveletElement,
})
</script>


